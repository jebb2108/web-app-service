<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Messenger</title>
    <link rel="stylesheet" href="/chat.css?v=03012026-1">
</head>
<body>
    <div class="chat-container">
        <!-- Заголовок для режима ожидания -->
        <div class="chat-header waiting-header">
            <h2>Messenger</h2>
        </div>

        <!-- Заголовок для режима чата (скрыт по умолчанию) -->
        <div class="chat-header connected-header" style="display: none;">
            <div class="partner-info">
                <span class="partner-nickname" id="partnerNickname">Partner</span>
                <div id="partnerStatus" class="status-indicator offline"></div>
            </div>
            <div class="header-menu">
                <button class="menu-dots">⋯</button>
                <div class="dropdown-menu">
                    <button class="menu-item" onclick="handleReport()">Report</button>
                    <button class="menu-item" id="exitButton">Exit</button>
                </div>
            </div>
        </div>

        <!-- Баннер о выходе партнера под шапкой -->
        <div id="partnerLeftBanner" class="partner-left-banner" style="display: none;">
            <div class="partner-left-content">
                <div class="partner-left-text">Partner Left</div>
            </div>
        </div>

        <div class="messages-container" id="messagesContainer">
            <!-- Сообщения будут добавляться динамически -->
        </div>

        <!-- Контейнер ожидания -->
        <div class="waiting-container" id="waitingContainer">
            <div class="timer-circle">
                <svg class="timer-svg" width="120" height="120" viewBox="0 0 120 120">
                    <circle class="timer-background" cx="60" cy="60" r="54" stroke="#e0e0e0" stroke-width="4" fill="none"></circle>
                    <circle class="timer-progress" cx="60" cy="60" r="54" stroke="#2e7d32" stroke-width="4" fill="none"
                            stroke-dasharray="339.292" stroke-dashoffset="0"></circle>
                </svg>
                <div class="timer-text" id="waitingTimer">30</div>
            </div>
            <div class="waiting-label">Waiting for partner...</div>
            <button class="cancel-button" onclick="handleExit(true)">Cancel</button>
        </div>

        <div class="input-container" style="display: none;">
            <input type="text" id="messageInput" placeholder="Enter your message...">
            <button id="sendButton" onclick="sendMessage()">Send</button>
        </div>

        <!-- Кнопка поиска нового партнера внизу -->
        <div id="partnerLeftButton" class="partner-left-button-container" style="display: none;">
            <button id="searchNewPartnerButton" class="search-new-partner-button">Search for another partner</button>
        </div>
    </div>
    <script src="/chat.js?v=03012026-1"></script>
</body>
</html>